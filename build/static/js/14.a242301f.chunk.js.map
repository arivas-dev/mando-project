{"version":3,"sources":["assets/img/login/logo.jpeg","pages/Users/Users.js"],"names":["Option","Form","Item","Select","Users","firestore","getFirestore","firebaseApp","auth","getAuth","functions","getFunctions","user","useContext","AppContext","console","log","useForm","form","rules","LocalStorageHandler","uid","required","message","save","httpsCallable","a","email","password","rol","createUserWithEmailAndPassword","then","usuarioFirebase","infoUsuario","docuRef","doc","setDoc","role","resetFields","success","error","getErrorMessage","code","className","xs","sm","md","lg","onFinish","style","width","display","justifyContent","objectFit","objectPosition","height","src","security","label","name","Password","showSearch","placeholder","value","type","block","htmlType"],"mappings":"6FAAe,QAA0B,mC,6NCYjCA,GADSC,IAATC,KACWC,IAAXH,QA4IOI,UAvID,WACV,IAAMC,EAAYC,YAAaC,KACzBC,EAAOC,YAAQF,KACfG,EAAYC,cAEVC,EAASC,qBAAWC,KAApBF,KACRG,QAAQC,IAAI,iBAAkBJ,GANd,MAODX,IAAKgB,UAAbC,EAPS,oBAUVC,GAFMC,IAAoBR,KAAKS,IAEvB,CAAC,CAAEC,UAAU,EAAMC,QAAS,uBAqBpCC,GAnBYC,YAAcf,EAAW,aAmBjC,uCAAG,qCAAAgB,EAAA,6DAASC,EAAT,EAASA,MAAOC,EAAhB,EAAgBA,SAAUC,EAA1B,EAA0BA,IAA1B,kBAGqBC,YAA+BtB,EAAMmB,EAAOC,GAAUG,MAAK,SAAAC,GACjF,OAAOA,KAJN,OAGCC,EAHD,OAMLlB,QAAQC,IAAI,8BAA+BiB,GAErCC,EAAUC,YAAI9B,EAAD,gBAAqB4B,EAAYrB,KAAKS,MAEzDe,YAAOF,EAAS,CAAEP,QAAOU,KAAMR,IAC/BX,EAAKoB,cACLf,IAAQgB,QAAQ,sBAZX,kDAcLhB,IAAQiB,MAAMC,EAAgB,EAAD,KAC7B1B,QAAQyB,MAAM,0BAAd,MAfK,0DAAH,uDAoBJC,EAAkB,SAACD,GACrB,OAAQA,EAAME,MACV,IAAK,4BACD,MAAO,8BACX,IAAK,qBACD,MAAO,uBACX,IAAK,6BACD,MAAO,+BACX,IAAK,qBACD,MAAO,2BACX,QACI,MAAO,kBAMnB,OACI,qBAAKC,UAAU,aAAf,SACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAKC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAE9B,cAAC,IAAD,CAAKH,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SAEI,eAAC,IAAD,CAAM7B,KAAMA,EAAM8B,SAAUxB,EAA5B,UACI,uBACA,uBACA,uBACA,qBAAKyB,MAAO,CAAEC,MAAO,OAAQC,QAAS,OAAQC,eAAgB,UAA9D,SACI,qBAAKH,MAAO,CAAEI,UAAW,QAASC,eAAgB,UAAWJ,MAAO,OAAQK,OAAQ,QAAUC,IAAKC,QAEvG,uBACA,uBACA,uBAEA,cAAC,IAAKvD,KAAN,CACIwD,MAAM,QACNC,KAAK,QACLxC,MAAOA,EAHX,SAKI,cAAC,IAAD,MAIJ,cAAC,IAAKjB,KAAN,CACIwD,MAAM,WACNC,KAAK,WACLxC,MAAOA,EAHX,SAKI,cAAC,IAAMyC,SAAP,MAGJ,cAAC,IAAK1D,KAAN,CACIwD,MAAM,OACNC,KAAK,MACLxC,MAAOA,EAHX,SAKI,eAAC,IAAD,CACI0C,YAAU,EACVC,YAAY,OAFhB,UAKI,cAAC9D,EAAD,CAAQ+D,MAAM,QAAd,mBACA,cAAC/D,EAAD,CAAQ+D,MAAM,OAAd,uBASR,cAAC,IAAD,CAAQC,KAAK,UAAUC,OAAK,EAACC,SAAS,SAAtC,yBAKR,cAAC,IAAD,CAAKtB,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI","file":"static/js/14.a242301f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c94fb522.jpeg\";","import { AppContext } from 'context/app'\r\nimport { useContext } from 'react'\r\nimport { Form, Input, Col, Row, DatePicker, Select, Radio, TimePicker, Button, message } from 'antd'\r\nimport security from 'assets/img/login/logo.jpeg';\r\nimport moment from 'moment'\r\nimport { getFirestore, doc, collection, setDoc, addDoc, db } from \"firebase/firestore\";\r\nimport { firebaseApp } from \"firebase\";\r\nimport { LocalStorageHandler } from 'utils/LocalStorageHandler'\r\nimport { getFunctions, httpsCallable } from \"firebase/functions\";\r\nimport { getAuth, createUserWithEmailAndPassword } from 'firebase/auth';\r\n\r\nconst { Item } = Form;\r\nconst { Option } = Select;\r\nconst email = 'alexander.rivascorea17@gmail.com'\r\nconst name = 'Hourly survey data'\r\n\r\n\r\nconst Users = () => {\r\n    const firestore = getFirestore(firebaseApp);\r\n    const auth = getAuth(firebaseApp);\r\n    const functions = getFunctions();\r\n\r\n    const { user } = useContext(AppContext)\r\n    console.log(\"Hours  -  user\", user);\r\n    const [form] = Form.useForm();\r\n    const uid = LocalStorageHandler.user.uid\r\n\r\n    const rules = [{ required: true, message: 'Field is required' }];\r\n\r\n    const sendEmail = httpsCallable(functions, 'sendEmail');\r\n\r\n    //function to build the email content with the data from the form\r\n    const buildEmail = (data) => {\r\n        const { name, email, number_of_hours, justification, station, time_of_entry, time_of_exit, day_off } = data;\r\n        const date = moment().format('DD/MM/YYYY');\r\n        const time = moment().format('HH:mm');\r\n        const content = `Data sent: ${date} - ${time}<br>\r\n    Name: ${name}<br>\r\n    Email: ${email}<br>\r\n    Number of hours: ${number_of_hours}<br>\r\n    Justification: ${justification}<br>\r\n    Station: ${station}<br>\r\n    Time of entry: ${time_of_entry}<br>\r\n    Time of exit: ${time_of_exit}<br>\r\n    Day off: ${day_off}<br>`;\r\n        return content;\r\n    }\r\n\r\n    const save = async ({ email, password, rol }) => {\r\n        try {\r\n\r\n            const infoUsuario = await createUserWithEmailAndPassword(auth, email, password).then(usuarioFirebase => {\r\n                return usuarioFirebase\r\n            })\r\n            console.log(\"infoUsuario  -  infoUsuario\", infoUsuario);\r\n\r\n            const docuRef = doc(firestore, `users/${infoUsuario.user.uid}`);\r\n\r\n            setDoc(docuRef, { email, role: rol })\r\n            form.resetFields()\r\n            message.success('Saved successfully')\r\n        } catch (error) {\r\n            message.error(getErrorMessage(error))\r\n            console.error(\"Error adding document: \", error);\r\n\r\n        }\r\n    }\r\n\r\n    const getErrorMessage = (error) => {\r\n        switch (error.code) {\r\n            case 'auth/email-already-in-use':\r\n                return 'The email is already in use';\r\n            case 'auth/invalid-email':\r\n                return 'The email is invalid';\r\n            case 'auth/operation-not-allowed':\r\n                return 'The operation is not allowed';\r\n            case 'auth/weak-password':\r\n                return 'The password is too weak';\r\n            default:\r\n                return 'Unknown error';\r\n        }\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"books-page\">\r\n            <Row>\r\n                <Col xs={1} sm={2} md={6} lg={7}></Col>\r\n\r\n                <Col xs={22} sm={20} md={12} lg={10} >\r\n\r\n                    <Form form={form} onFinish={save}>\r\n                        <br />\r\n                        <br />\r\n                        <br />\r\n                        <div style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                            <img style={{ objectFit: 'cover', objectPosition: '50% 50%', width: '100%', height: 'auto' }} src={security} />\r\n                        </div>\r\n                        <br />\r\n                        <br />\r\n                        <br />\r\n\r\n                        <Form.Item\r\n                            label=\"Email\"\r\n                            name=\"email\"\r\n                            rules={rules}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n\r\n\r\n                        <Form.Item\r\n                            label=\"Password\"\r\n                            name=\"password\"\r\n                            rules={rules}\r\n                        >\r\n                            <Input.Password />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            label=\"Role\"\r\n                            name=\"rol\"\r\n                            rules={rules}\r\n                        >\r\n                            <Select\r\n                                showSearch\r\n                                placeholder=\"ROLE\"\r\n\r\n                            >\r\n                                <Option value=\"admin\">ADMIN</Option>\r\n                                <Option value=\"user\">USER</Option>\r\n                            </Select>\r\n                        </Form.Item>\r\n\r\n\r\n\r\n\r\n\r\n\r\n                        <Button type=\"primary\" block htmlType=\"submit\">\r\n                            Submit\r\n                        </Button>\r\n                    </Form>\r\n                </Col>\r\n                <Col xs={1} sm={2} md={6} lg={7}></Col>\r\n            </Row>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Users\r\n"],"sourceRoot":""}